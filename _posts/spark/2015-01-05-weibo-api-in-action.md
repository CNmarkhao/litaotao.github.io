---
layout: post
published: false
title: ［touch spark］10. 在spark streaming中应用新浪微博数据  
description: 原本想试试twitter的，无奈天朝接不通twitter，只能用微博数据来玩玩了，sigh~~~
---  


##  
## 1. 实验目的
　　这次实验是想尝试一下spark streaming的效果，预期是这样的：通过每隔 **几秒** 从新浪微博拿到 **一些** 公开的微博数据，然后实时 **处理** 一下这些数据并 **展现** 出来。  
　　ok，这里的关键上面已经用粗体标记出来了。有两个方面，一是时间间隔的设置，数据流量的设置，这关系到streaming的稳定性，比如说若处理速度小于数据流入的速度的话，那数据会慢慢堆积起来；若数据流入速度小于处理速度的话，展现处理结果肯定也不好看。这里是属于tuning的环境，可以在spark官网上仔细瞧瞧，不过具体还是要根据应用需求来定。第二个方面是数据处理和展示，这应该是应用的核心了。这里我们做得很初级，简单做一些TF-IDF的测试或者是更简单的包含性测试。   
　　既然是第一次，那就不要太那啥，还是简单一点好。暂时定一个目标，我们想看看实时微博中哪些是包含某某字段的，然后输出这些微博的信息。比如说，我想知道实时微博中，哪些是包含“建设银行”，“涨”这样两个关键字的微博，并实时打印出来。  

## 2. 步骤规划
　　我们第一次的目标很简单，当然按照上面的说法，其实也就是三个步骤：  

- 拿数据，通过新浪微博API  
- 处理数据，即对每条微博进行一个检测，看是否包含“建设银行”，“涨”这两条关键字  
- 展示数据，简单的打印下来即可  

## 3. 新浪微博API使用
　　微博官方已经有详细的新手引导了，这里就不重复造轮子了，大家可以直接参考 [这里](http://open.weibo.com/wiki/%E6%96%B0%E6%89%8B%E6%8C%87%E5%8D%97)    
　　我用的是[Python SDK](https://github.com/michaelliao/sinaweibopy)  

## 4. 处理数据  
　　要看是否包含“建设银行”，“涨”这两个关键字就简单得多了，用python的话可以直接用 ` u'涨' in weibo_text and u'建设银行' in weibo_text` 就可以了，scala的话也有 `contains` 方法可以直接用。  

## 5. 展示数据  
